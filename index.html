<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Project Manager Portal — AlArabClub777</title>
<style>
:root {
  --bg:#0b0f14; --panel:#11161d; --muted:#9aa4b2;
  --gold:#FFD166; --accent:#00D4FF;
}
body{margin:0;font-family:'Segoe UI',sans-serif;background:var(--bg);color:#fff;display:flex;flex-direction:column;min-height:100vh;}
header{display:flex;align-items:center;justify-content:space-between;padding:12px 20px;background:rgba(255,255,255,.05);backdrop-filter:blur(10px);}
header h1{font-size:1.1rem;color:var(--gold);}
.toolbar{display:flex;gap:8px;align-items:center;}
.toolbar button,.toolbar select,.toolbar input{padding:6px 10px;border-radius:8px;border:none;background:rgba(255,255,255,.1);color:#fff;}
#files{flex:1;display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));padding:20px;overflow:auto;}
.card{background:var(--panel);padding:10px;border-radius:12px;cursor:pointer;transition:.2s;}
.card:hover{transform:translateY(-4px);box-shadow:0 8px 18px rgba(0,0,0,.4);}
.thumb{height:120px;display:flex;align-items:center;justify-content:center;background:#000;border-radius:8px;margin-bottom:6px;}
.thumb img,.thumb video{max-width:100%;max-height:100%;border-radius:8px;}
.fname{font-weight:bold;color:var(--gold);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.fmeta{font-size:.8rem;color:var(--muted);}
#preview{position:fixed;right:0;top:60px;width:320px;height:calc(100% - 60px);background:rgba(0,0,0,.8);backdrop-filter:blur(12px);padding:12px;overflow:auto;display:none;flex-direction:column;z-index:20;}
#viewer iframe,#viewer img,#viewer video{width:100%;border-radius:8px;}
footer{padding:10px;text-align:center;font-size:.8rem;background:rgba(255,255,255,.05);}
</style>
</head>
<body>
<header>
  <h1>📂 Project Manager Portal — CLUB777</h1>
  <div class="toolbar">
    <button id="pick">اختر مجلد</button>
    <input id="search" placeholder="🔎 بحث أو أوامر...">
    <select id="viewMode"><option value="grid">Grid</option><option value="card">Card</option><option value="list">List</option></select>
    <select id="theme"><option value="dark">Dark</option><option value="light">Light</option><option value="glassy">Glassy</option></select>
  </div>
</header>

<div id="files"></div>

<div id="preview">
  <h3 id="pname"></h3>
  <div id="pmeta"></div>
  <div id="viewer"></div>
</div>

<footer>🌐 Project by | <b>AlArabClub777 العرّاب © 2025</b></footer>

<script>
let filesData=[]; let mode='grid';
const filesDiv=document.getElementById('files');
const preview=document.getElementById('preview'), pname=document.getElementById('pname'),
      pmeta=document.getElementById('pmeta'), viewer=document.getElementById('viewer');

async function pickFolder(){
  const dir=await window.showDirectoryPicker();
  filesData=[];
  for await(const entry of dir.values()){
    if(entry.kind==="file"){
      const f=await entry.getFile();
      filesData.push({name:f.name,size:f.size,type:f.type,last:f.lastModified,file:f});
    }
  }
  render();
}

function render(){
  filesDiv.innerHTML="";
  filesData.forEach(f=>{
    const card=document.createElement('div'); card.className='card';
    const t=document.createElement('div'); t.className='thumb';
    if(f.type.startsWith('image/')){ let img=document.createElement('img'); img.src=URL.createObjectURL(f.file); t.appendChild(img);}
    else if(f.type.startsWith('video/')){ let v=document.createElement('video'); v.src=URL.createObjectURL(f.file); v.muted=true; v.loop=true; v.play(); t.appendChild(v);}
    else{t.textContent=f.name.split('.').pop().toUpperCase();}
    const n=document.createElement('div'); n.className='fname'; n.textContent=f.name;
    const m=document.createElement('div'); m.className='fmeta'; m.textContent=(f.size/1024).toFixed(1)+" KB";
    card.appendChild(t); card.appendChild(n); card.appendChild(m);
    card.onclick=()=>showPreview(f);
    filesDiv.appendChild(card);
  });
}

function showPreview(f){
  preview.style.display="flex";
  pname.textContent=f.name;
  pmeta.textContent=(f.size/1024).toFixed(1)+" KB — "+f.type;
  viewer.innerHTML="";
  if(f.type.startsWith('image/')){let i=document.createElement('img');i.src=URL.createObjectURL(f.file);viewer.appendChild(i);}
  else if(f.type.startsWith('video/')){let v=document.createElement('video');v.controls=true;v.src=URL.createObjectURL(f.file);viewer.appendChild(v);}
  else if(f.type==="application/pdf"){let ifr=document.createElement('iframe');ifr.src=URL.createObjectURL(f.file);viewer.appendChild(ifr);}
  else if(f.name.endsWith(".html")){let ifr=document.createElement('iframe');ifr.src=URL.createObjectURL(f.file);viewer.appendChild(ifr);}
  else{let pre=document.createElement('pre');pre.textContent="لا توجد معاينة";viewer.appendChild(pre);}
}

document.getElementById('pick').onclick=pickFolder;
</script>
</body>
</html>
